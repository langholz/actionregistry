<!DOCTYPE html>
<html>
<head>
    <title>Action Registry Admin</title>
    <script src="http://rawgit.com/visionmedia/superagent/master/superagent.js"></script>
</head>
<body>
<script type="text/javascript">
    function reset() {
        superagent
        .post('/reset')
        .end(function (res) {
            if (!res.ok) {
                throw new Error('Invalid response to /reset. status: ' + res.status);
            }
        });
    }

    function addProvider() {
        superagent
        .post('/provider')
        .send({
            "action": "bookflight",
            "friendlyName": "Book a Flight",
            "provider": {
                // http://www.expedia.com/Flights-Search?trip=roundtrip&leg1=from:SEA,to:SFO&leg2=from:SFO,to:SEA&passengers=children:0,adults:1,seniors:0,infantinlap:Y&mode=search
                "target": "http://www.expedia.com/Flights-Search?trip=roundtrip&leg1=from:%origin%,to:%destination%&leg2=from:%destination%,to:%origin%&passengers=children:0,adults:1,seniors:0,infantinlap:Y&mode=search",
                "friendlyName": "Expedia",
                "params": [
                    {"origin": {"friendlyName": "Origin" }},
                    {"destination": {"friendlyName": "Destination" }}
                ]
            }
        })
        .end(function (res) {
            if (!res.ok) {
                throw new Error('Invalid response to /provider. status: ' + res.status);
            }
        });
    }

    function addAction() {
        // For yammer
        superagent
        .post('/action')
        .send({
            entityUrl: 'https://www.facebook.com/fourseasonshotelseattle',
            action: 'gethotelreview'
        })
        .end(function (res) {
            if (!res.ok) {
                throw new Error('Invalid response to /action. status: ' + res.status);
            }
        });

        // For facebook
        superagent
        .post('/action')
        .send({
            entityUrl: 'https://www.idowakrat.dev041.lla1.facebook.com/fourseasonshotelseattle',
            action: 'gethotelreview'
        })
        .end(function (res) {
            if (!res.ok) {
                throw new Error('Invalid response to /action. status: ' + res.status);
            }
        });
    }
</script>
<button type="button" onclick="reset();">Reset</button>
<br>
<br>
<br>
<textarea rows="10" cols="50" style="resize: none;">
    Some PROVIDER to add
</textarea>
<br>
<button type="button" onclick="addProvider();">Add Provider</button>
<br>
<br>
<br>
<textarea rows="10" cols="50" style="resize: none;">
    Some ACTION to add
</textarea>
<br>
<button type="button" onclick="addAction();">Add Action</button>
</body>
</html>
